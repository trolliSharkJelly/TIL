# 프로세스

## 프로세스란?
-  컴퓨터에서 연속적으로 실행되고 있는 컴퓨터 프로그램 (위키백과)
-  프로그램이 실행 중인 상태로 특정 메모리 공간에 프로그램의 코드가 적재되고 CPU 가 해당 명령어를 하나씩 수행하고 있는 상태
-  Chrome 브라우저 두 개를 실행했을 때 두 개의 프로세스가 생성된다. 이처럼 하나의 애플리케이션은 여러 프로세스(다중 프로세스)를 만들기도 한다.
![스크린샷 2022-08-01 오후 11 16 57](https://user-images.githubusercontent.com/99730280/182168104-e984d63d-7e88-45ee-b9bc-00c0da19d568.png)

## 프로세스의 구성요소
- 유저 메모리 영역 관리 : 프로세스별 독립된 영역을 가지는 공간. 프로세스별 독립적인 유저 메모리 영역을 관리하기 위해 VAD(Virtual Address Descriptors)라는 관리 테이블이 존재한다.
- 핸들 테이블 : 프로세스에서 사용하는 모든 핸들에 대한 커널 객체 포인터 정보를 배열 형태로 가지고 있는 공간이며, 
프로세스 종료 시 해당 테이블의 정보를 참고하여 프로세서에서 사용하고 있는 모든 커널 객체를 반환한다,
- 독립적인 메모리 공간 : 프로세스 단위로 관리되는 자원 중 가장 중요한 구별점은 가상 메모리다. 
페이징 기법을 이용하여 프로세스마다 별도의 고유한 메모리를 사용할 수 있게 하고 있다(윈도우의 경우).

## 프로세스의 상태
- 실행(Run) : 프로세스가 프로세서를 차지하여 서비스를 받고 있는 상태.
- 준비(Ready) : 실행될 수 있도록 준비되는 상태.
- 대기(Waiting) : CPU 의 사용이 아니라 입출력의 사건을 기다리는 상태.

# 스레드

## 스레드란?
- 명령어가 CPU를 통해 수행되는 객체의 단위
- 하나의 프로세스 내에는 반드시 1개 이상의 스레드가 존재하며, 스레드는 같은 프로세스에 있는 자원과 상태를 공유한다.
- 하나의 스레드가 수정한 메모리는 같은 메모리를 참조하는 스레드에 영향을 미친다.
- 프로세스 종료 시 해당 프로세스에 속했던 스레드도 함께 종료된다.

## 스레드가 필요한 이유
- 하나의 프로세스 안에서 여러 개의 작업을 동시에 독립적으로 수행하여 처리하려고 할 때 사용한다.
- 예를 들어 워드 사용 시 사용자로부터 키보드 입력을 받거나 문법 오류 체크 등 워드 내에서 여러 요청을 동시에 수행해야 할 때 스레드가 필요하다.

## 스레드의 구성요소
- 가상 CPU : 인터프리터, 컴파일러에 의해 내부적으로 처리되는 가상 코드
- 수행 코드 : Thread Class에 구현되어 있는 run() Method 코드
- 처리 데이터 : Thread에서 처리하는 데이터

## 스레드의 특징
- 프로세스 내에서 실행되는 흐름의 단위
- 각 스레드별 call stack이 존재하며 나머지 code, data, heap 영역은 스레드끼리 공유한다.
- 단, 프로세스는 다른 프로세스의 메모리에 접근할 수 없다.
- 스레드는 다른 스레드와 독립적으로 동작하기 때문에 두 개 이상의 스레드가 동작할 때 해당 스레드의 실행 및 종료 순서는 예측할 수 없다.

## 싱글 스레드와 멀티 스레드
### 싱글 스레드
- 프로세스가 단일 스레드로 동작하는 방식.
- 일련의 처리를 단일 스레드만으로 직렬 처리하는 프로그래밍 방법

### 싱글 스레드의 장점
- 자원 접근에 대한 동기화를 신경쓰지 않아도 된다. 스레드가 일정 자원에 동시에 접근하거나 같은 작업을 실행할 경우 에러가 발생하므로 스레드들이 동시에 같은 자원에 접근하지 못하도록 제어해야 한다.
- 프로그래밍 난이도가 쉽고 CPU 메모리를 적게 사용한다.

### 싱글 스레드의 단점
- 여러 개의 CPU를 활용하지 못한다. 싱글 스레드는 하나의 물리적 코어만 사용하기 때문이다.
- 처리량이 많은 작업을 진행할 경우 해당 작업이 완료되어야 다른 작업을 수행할 수 있다.
- 에러 처리를 하지 못하는 경우 멈춰버린다.

### 멀티 스레드
- 하나의 프로세스에서둘 이상의 스레드가 동시에 작업을 수행하는 것

### 멀티 스레드의 장점
- 작업을 분리해서 수행하므로 실시간으로 사용자에게 응답할 수 있다.
- 싱글 스레드는 한 프로세스는 오직 한 프로세서에서만 수행할 수 있지만 멀티스레드는 한 프로세스를 여러 프로세서에서 수행 할 수 있다.

### 멀티 스레드의 단점
- 자원 공유에 문제가 발생하며, 하나의 스레드가 문제가 발생하면 전체 프로세스가 영향을 받는다.
- 주의 깊은 설계가 필요하며 디버깅이 까다롭다.

# AWS(Amazon Web Service)

## Cloud Computing
### 등장 배경
클라우드 등장 이전 회사들은 자체적으로 전산실을 구축하는 온프레미스 환경으로 서비스를 제공했다. 하지만 서버에 대한 주기적인 관리 및 장애 처리 대응으로 추가적인 비용과 인력이 투입되며 비용이 점차 증가하는 문제점이 있다.
이 때 클라우드가 등장했으며, 클라우드는 데이터 센터에서 서버의 자원과 공간 및 네트워크 환경을 제공하고 필요할 때마다 컴퓨팅 능력을 유연하게 조절할 수 있다. 자원을 사용만 만큼의 요금을 지불하며, 다른 컴퓨터로 마이그레이션이 가능하다.

### 클라우드
현대의 클라우드 컴퓨팅은 물리적인 컴퓨터가 아니라 가상 컴퓨터를 대여한다는 점이 다르다. 이러한 클라우드도 단점이 있는데 운영 환경 자체가 클라우드 제공자에게 종속되므로, 클라우드 서비스에 문제 발생 시 내가 배포 및 관리하는 서비스에도 영향을 미친다.  

### 클라우드의 서비스 형태
클라우드 제공자로부터 얼마만큼의 서비스를 제공받느냐에 따라 서비스 형태가 구분된다.  

1. SaaS(Software as a Service)
클라우드 제공자가 당장 사용 가능한 소프트웨어를 제공하는 경우 대부분 SaaS에 해당한다.

2. IaaS(Infrasturcture as a Service)
클라우드 제공자가 가상 컴퓨터까지 제공하는 경우 laaS에 해당한다.

3. PaaS(Platform as a Service)
클라우드 제공자가 데이터베이스, 개발 플랫폼까지 제공하는 경우 이에 속한다.

## Deploy
로컬 환경에서만 구동 되는 서비스는 자신만 사용할 수 있으므로 다른 사람들도 내가 개발한 서비스를 사용할 수 있으려면 배포를 해야한다.

### 배포
자신이 개발한 서비를 사용자들이 이용 가능하게 하는 일련의 과정이며 회사마다 다르지만 기본적으로 Development, Integration, Staging, Production 의 4단계를 거쳐서 개발한 서비스를 배포한다.

### 배포 단계
1. Development
- local 컴퓨터 환경에서 개발 및 테스트
- Sample Data 이용
- 변경사항이 있어도 문제 되지 않음
- 모든 구성원이 각자의 환경에서 진행

2. Integration
- 각자의 환경에서 개발된 부분 취합
- 코드간 conflict가 없는지 확인
- 작성한 코드가 다른 코드에 문제를 발생 시키지 않는지 확인

3. Staging
- Production 단계와 가장 유사한 환경에서 테스트
- 복제된 실제 데이터를 이용해서 테스트
- 모든 관계자들에게 검증하는 단계

4. Production
- 개발환경과는 구분 된 환경
- 실제 데이터를 이용
- 실제로 서비스가 제공되는 단계이기 때문에 문제가 생기면 안되는 단계

### 작성한 코드가 다른 환경에서 정상 작동할 수 있게 하려면?
개발자들의 작업 환경 차이를 이해하고 환경 설정을 코드와 분리하는 것이 중요하다.  
작성한 코드가 다른 환경에서 정상 작동하게 하려면 설정을 환경 변수에 저장해야 한다.  
환경 변수는 코드 변경 없이 배포 때마다 쉽게 변경할 수 있다.  
애플리케이션의 모든 설정이 정상적으로 코드 바깥으로 분리되어 있는지 확인하는 방법은 어떤 인증 정보도 유출시키지 않고 코드가 당장 오픈 소스가 될 수 있는지 확인하는 것이다.  
코드 상의 모든 곳에 상대 경로를 사용해야 하며 `env` 등을 이용해 환경 변수를 설정한다. 그 외에도 docker와 같은 가상화 도구는 환경 자체를 메타 데이터로 담아 모든 개발 환경을 통일시킨다.

### aws 외의 배포 플랫폼들
heroku, DigitalOcean, Microsoft Azure, Firebase


## EC2(Elastic Compute Cloud)
### EC2란
- 아마존 웹 서비스에서 제공하는 클라우드 컴퓨팅 서비스. 
- 클라우드 컴퓨팅은 인터넷(클라우드)을 통해 서버, 스토리지, 데이터베이스 등의 컴퓨팅 서비스를 제공하는 서비스이며, 예를 들면 아마존에서 가상의 컴퓨터 한 대를 빌리는 것과 같다.
- Elastic : 사전적 의미로는 '탄력 있는'이며, 사용자가 사용한 만큼만 비용을 지불하기 때문에 해당 단어가 붙었다. 비용적인 부분 뿐만 아니라 필요에 따라 성능, 용량을 자유롭게 조절할 수 있다는 의미도 있다.
- EC2는 AWS에서 비용, 성능, 용량 면에서 탄력적인 클라우드 컴퓨터를 제공하는 서비스이다.

### 장점
1. 구성 소요 시간이 짧다
2. AMI라는 다양한 템플릿을 제공하고 있어서 필요에 따라 다양한 운영체제 선택이 가능하다.
3. 뿐만 아니라 CPU, RAM, 용량까지 손쉽게 구성이 가능하다.

### Instance
인스턴스는 1개의 컴퓨터를 의미하는 단위이고, AWS에서 컴퓨터를 비리는 것을 인스턴스를 생성한다고 한다.  
EC2는 컴퓨터를 한 대 빌리는 것이므로, 컴퓨터로 할 수 있는 모든 일을 할 수 있다.  
빌린 컴퓨터는 아마존이 전 세계에 만들어 놓은 데이터 센터에 있기 때문에 네트워크를 통해 해당 컴퓨터를 제어하는 차이점이 있을 뿐 일반적인 컴퓨터와 다른 점은 없다.  
EC2를 통해 할 수 있는 가장 기본적인 일은 웹 서버를 설치하고 웹 서버를 통해 사용자가 웹 브라우저를 통해 요청하는 서비스를 제공하는 것이다.

### AMI(Amazon Machine Image)
AMI는 소프트웨어 구성이 기재된 템플릿이다.  
이미지 종류는 단순히 운영체제(window, obuntu, linux 등)만 설치된 템플릿을 선택할 수 있고, 특정 런타임이 설치된 템플릿이 제공되는 경우도 있다(예: ubunto + node.js).  
인스턴스는 선택한 AMI를 토대로 구성되며 AWS에는 많은 양의 AMI 세팅이 준비되었기 때문에 손쉽게 인스턴스의 운영체제를 구성할 수 있다.

### AWS EC2 인스턴스를 생성한다는 것은 AMI를 토대로 운영체제, CPU, RAM 혹은 런타임 등이 구성된 컴퓨터를 빌리는 것이다.


## RDS(Relational Database Service)
- AWS에서 제공하는 관계형 데이터베이스 서비스

### RDS를 사용하는 이유
EC2는 가상의 컴퓨터를 임대하는 서비스인데, EC2 인스턴스에 MySQL 같은 관계형 데이터베이스 엔진을 설치하면 RDS를 사용할 이유가 없을 수도 있다. 하지만 EC2 인스턴스에 관계형 데이터베이스 엔진을 설치해서 데이터를 관리할 때와 RDS를 통해 데이터를 관리할 때의 차이는 개인 소유 차량과 렌터카 회사에서 대여한 차량으로 비유할 수 있다.  
전자가 개인 소유 차량이며 후자는 렌터카 대여 차량이다. 개인 소유 차량 이용 시 보험금, 유지보수와 같은 것을. 온전히 운전자가 부담하며 정비소도 주기적으로 직접 방문하는 수고가 크다.  
렌터카 차량 이용 시 개인이 해야하는 수고를 렌터카 회사에서 알아서 해주기 때문에 사용자는 편하게 운전만 하면 된다.  
RDS 이용 시 데이터베이스 유지 보수와 관련된 일들을 RDS에서 전적으로 자동 관리한다. 사용자는 초기 설정 및 데이터베이스의 데이터를 관리하면 되기에 큰 편의성을 느낄 수 있다.

### 다양한 데이터 베이스 엔진 선택지 제공
- oracle, Amazon Aurora, Microsoft SQL Server, MySQL, MariaDB, PostgreSQL
- 데이터베이스 엔진 마다 제공하는 기능이 조금씩 다르기때문에 필요와 목적에 맞게 선택하는 것이 중요하다.

## S3(Simple Storage Service)

### 클라우드 스토리지란?
- 인터넷 공간에 데이터를 저장하는 저장소
- Google Drive, Naver MYBOX, Microsoft Onedrive

### S3란?
- AWS에서 제공하는 클라우드 스토리지 서비스

### S3의 장점
- 뛰어난 접근성
- 확장성 : 스토리지 용량을 무한히 확장할 수 있으며, 사용한 만큼 비용을 지불하면 되기 때문에 비용적 측면에서 효율적이다. 
- 내구성 : 예를 들면 S3에 저장된 파일을 잃을 확률보다 길을 걷다가 벼락을 맞출 확률이 700배 높다고 한다.
- 가용성 : 99.99%의 가용성을 보장하기 때문에 스토리지에 저장된 파일들을 정상적으로 사용할 수 있는 기간이 길다.
- 다양한 스토리지 클래스를 제공해서 저장소를 어떤 목적으로 활용할지에 따라 효율적으로 선택할 수 있는 스토리지 클래스가 달라진다. S3 사용자들이 대표적으로 많이 선택하는 스토리지 클래스는 Standard, Glacier가 있다. Standard 클래스는 범용적인 목적으로 사용하기 좋으며 데이터에 빠른 속도로 접근할 수 있고 데이터 액세스 요청에 대한 처리 속도도 빠르다. 대신 보관비용이 높게 발생하기 때문에 데이터를 오래 보관하는 목적으로는 좋은 선택지가 아니다. 장기간 보관 목적이 있을 시 Glacier를 사용하는 것이 효율적이다. 데이터에 액세스하는 속도는 느리지만 데이터 보관 비용이 저렴하다는 장점이 있다.
- 정적 웹 사이트 호스팅 가능 : 정적 파일은 서버의 개입 없이 생성된 파일이며, 동적 파일은 클라이언트가 서버에 요청을 보냈을 때 서버가 요청에 맞춰 생성한 파일을 뜻한다. 웹 호스팅은 서버의 한 공간을 임대하는 서비스이며 웹 호스팅 업체들을 통해 개인 또는 단체가 웹 호스팅 업체가 제공하는 서버의 공간을 빌려 원하는 서비스를 배포할 수 있다. S3에서는 버킷이라는 저장 공간에 정적 파일을 업로드 하고 버킷을 정적 웹 사이트 호스팅 용도로 구성하여 정적 웹 사이트를 배포할 수 있다.
```
[ 버킷 ]
S3에 저장되는 파일들이 담기는 바구니.
파일을 저장하는 최상위 디렉터리
S3에 저장되는 모든 파일은 버킷 안에 저장되어야 하고, 버킷엔 무한한 파일을 저장할 수 있다.
각각의 이름을 가진 버킷은 버킷이 속해 있는 리전에서 유일해야 한다.
버킷 정책을 생성하여 해당 버킷에 대한 다른 유저의 접근 권한을 수정할 수 있다. 
```
